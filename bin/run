#!/usr/bin/env bash

set -eou pipefail

[[ "$#" == 1 ]] && cd "$1"

if [[ ! -f Dockerfile ]]; then
  echo "Usage: $(basename "$0") [directory]"
  echo "Runs the docker image locally.  Run 'build' first."
  echo
  echo "Error:  No Dockerfile found"
  exit 1
fi

user="superorbital"
image=${PWD##*/}

[[ -f .docker-run-options ]] && OPTIONS=$(< .docker-run-options)

set -x
# shellcheck disable=SC2086
docker run $OPTIONS "$user/$image:latest"
